<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naomies advent calendar</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>
    <!--
    <div id="overlay" onclick="off()">
        <img id="doorSuprise" src=""">
    </div>
    -->
    <h1>Naomies advent<br>calendar</h1>

    <!--
    <button style="background-color: lightblue; width: 20%; position: relative; height: 10vh; margin-left: auto; margin-right: auto;" class="btn">Hier Klicken um alles zu Ã¶ffnen</button>
    <button style="background-color: lightblue; width: 20%; position: relative; height: 10vh; margin-left: auto; margin-right: auto;" class="btnLogIn">Login</button>

    -->


    <ul>

        
    <li class="one"><div class="door">1</div></li>
    <li class="img two"><div class="door">2</div></li>
    <li class="img three"><div class="door">3</div></li>

        


    <li class="img four"><div class="door">4</div></li>
    <li class="img five"><div class="door">5</div></li>


    <li class="img six"><div class="door">6</div></li>
    <li class="seven"><div class="door 7">7</div></li>
    <li class="img eight"><div class="door 8">8</div></li>
    <li class="nine"><div class="door">9</div></li>
    <li class="ten"><div class="door">10</div>
        <div style="font-size: 19.5px;" class="revealed">
            To get ready for german christmas
            <a style="color: #F8B229;" target="_blank" href="https://open.spotify.com/playlist/5SRTxUBKTTSXbGYQC5uqkd?si=028aff3c6e6b4723" title=""> ğŸ¶ </a>
        </div>
    </li>
    <li class="img eleven"><div class="door">11</div></li>

    <li class="btnLogIn twelve"><div class="door">12</div></li>

    <li class="mosaikDoor"><div class="door">13</div></li>
    <li class="img fourteen"><div class="door 14">14</div></li>

    <li class="fifeteen">
        <div class="door">15</div>
        <div style="font-size: 19.5px;" class="revealed">
            <a style="color: #F8B229;" target="_blank" href="https://www.jigsawplanet.com/?rc=play&pid=3dfe53a43657" title="TV-Abend">Puzzle ğŸ§©</a>
        </div>
    </li>

    <li class="sixteen"><div class="door">16</div></li>
    <li class="img seventeen"><div class="door">17</div></li>
    <li class="img eightteen"><div class="door">18</div></li>
    <li class="img nineteen"><div class="door">19</div></li>
    <li class="twenty"><div class="door">20</div></li>
    <li class="img twentyone"><div class="door">21</div></li>
    <li><div class="door">22</div></li>
    <li class="img twentythree"><div class="door">23</div></li>
    <li class="img"><div class="door">24</div></li>
    </ul>


    <!-- The Modal -->
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div class="mosaik">
            <br><iframe src="https://mosaically.com/embed/0ca94b63-a986-481a-85b5-c4f16582967a" scrolling="no" width="100%" height="700" frameBorder="0" allowfullscreen></iframe><!--REMOVING THE FOLLOWING CREDIT IS A VIOLATION OF YOUR TERMS OF USE--><br><small><a href="https://mosaically.com/maxza"></a> <a href="https://mosaically.com"></a></small>
        </div>
        <div class="countdown" style="left:0; width:50%; height:30vh; position:relative; padding-bottom:30%; margin:0 auto"><iframe src="https://www.tickcounter.com/widget/countdown/6224367" style="top:0; left:0; width:100%; height:100%; position:absolute; border:0; overflow:hidden" title="d"></iframe></div>
        <div id="caption"></div>
    </div>

    
    <!-- The Style Chooser -->
    <div id="chooseStyle" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div class="countdown" style="left:0; width:50%; height:30vh; position:relative; padding-bottom:30%; margin:0 auto"><iframe src="https://www.tickcounter.com/widget/countdown/6224367" style="top:0; left:0; width:100%; height:100%; position:absolute; border:0; overflow:hidden" title="d"></iframe></div>
        <div id="caption"></div>
    </div>




    <script>





        $( document ).ready(function() {
            
            //Ã¶ffent alle tÃ¼rchen
            $( ".btn" ).click(function() {
                for(var i=0; i <= 24; i++) {
                    $(".door").addClass("open");
                }
                
                //("li").each($(this).children(".door").addClass("open"));  
            });

            $( ".downloadBtn" ).click(function() {

            });

            // Get the modal
            var modal       = document.getElementById("myModal");

            // Get the image and insert it inside the modal - use its "alt" text as a caption
            var modalImg    = document.getElementById("img01");
            var captionText = document.getElementById("caption");

            // Get the <span> element that closes the modal
            var close        = document.getElementsByClassName("close")[0];

            // When the user clicks on <span> (x), close the modal
            close.onclick = function() { 
                modal.style.display = "none";
            }


            //===============================================================
            
            // First time open
            var chooseStyle = document.getElementById("chooseStyle");





            //===============================================================

            var words = [
                        "Until we see each other again", "Netflix Watchparty ğŸ¿", "German christmas cookies ğŸª", "ğŸƒ", "Supper date", 
                        "Happy Nikolaus Tag ğŸ…", "Special Candle ;)", 
                        "ğŸ‡©ğŸ‡ª/ğŸ‡¨ğŸ‡¦", "Voucher: Sexy Pic ğŸ˜‰", 
                        "", "Quiz âœï¸", "Game date night ğŸ•µï¸", 
                        "ğŸ“·", "Our places ğŸŒâ¤ï¸", "", "Ask me on Whatsapp for it ;)", 
                        "Pour ma belle blonde", 
                        "", "German Poutine ğŸŸ", "Dices ğŸ”¥ğŸ²", 
                        "ğŸ¨", "Something to get you over the 97% ;)", "", "Frohe Weihnachten â¤ï¸"
                        ];

                        
        
            var message = "";
            var date = new Date();
            var day = date.getDate();
            var month = date.getMonth() + 1;
            var scrolled = false;
            var timeDelay = 200;
            
            day = 24;


            //Testen
            $( ".downloadBtn" ).click(function() {
                //Beim ersten Mal Ã¶ffenen Style auswÃ¤hlen
                localStorage.setItem("calendarStyle", "cozy");
            });



            //Style Laden
            const style = localStorage.getItem("calendarStyle"); 
            if (style === "cozy") {
                loadCozyStyle();
            } else if (style === "funny") {
                loadFunnyStyle();
            }


            if(month === 11) {
                // Loop through each calendar window
                    $("li").each( function( index ) {
                        var adventwindow = index + 1;
                        var item = $(this);

                        // Open past windows
                        if(adventwindow < day) {
                            var door = item.children(".door");
                            door.addClass("open");
                        }
                        

                        // timeout offset for past window opening animation
                        timeDelay += 100;

                        // Add words so far to message variable
                        if( adventwindow <= day ) {

                            var word = words[index];

                            if(word == undefined || $(this).hasClass("img") || word == "") {
                                word = "";
                            } 
                            else {
                                $(this).append('<div class="revealed">' + word + '</div>');
                                message = message + " " + word;
                            }
                        }


                        // Add jiggle animation to current day window
                        if(adventwindow === day) {
                            $(this).addClass("current");
                            $(this).addClass("jiggle");
                        }




                        // On clicking a window, toggle it open/closed and
                        // handle other things such as removing jiggle and 25th
                        $(this).on("click", function() {

                            var isLoginBtn = $(this).hasClass("btnLogIn");
                            var isDoorOne = $(this).hasClass("one");
                            var isMosaik = $(this).hasClass("mosaikDoor");

                            $('.modal-content').css('display', 'block');
                            $('.countdown').css('display', 'none');
                            $('.mosaik').css('display', 'none');
                            
                            if (adventwindow <= day && $(this).hasClass("img") && !$(this).children(".door").hasClass("open") && !isDoorOne) {

                                        
                                var bg = $(this).css('background-image');
                                
                                var cleanup = /\"|\'|\)/g;
                                bg = bg.split('/').pop().replace(cleanup, '');
                                bg = "img/" + bg;
                                
                                //console.log(bg);

                                captionText.innerHTML = words[index];
                                modalImg.src = bg;
                                modal.style.display = "block";

                                
                            } else if(isLoginBtn) {

                                var text;
                                var password = prompt("password:");

                                if (password == null || password == "") {
                                    console.log('Input abgebrochen/leer');
                                }
                                else{
                                    if(password == "sube"){
                                        alert("Approved");

                                        var bg = $(this).css('background-image');
                                        var cleanup = /\"|\'|\)/g;
                                        bg = bg.split('/').pop().replace(cleanup, '');
                                        bg = "img/" + bg;
                                        
                                        console.log(bg);

                                        captionText.innerHTML = words[index];
                                        modalImg.src = bg;
                                        modal.style.display = "block";
                                    }
                                    else{
                                        alert("Login failed");
                                        $(this).removeClass("open");
                                        document.getElementById("myModal").style.display = "none";
                                    }
                                }
                            } else if(isDoorOne) {
                                $('.countdown').css('display', 'block');                             
                                captionText.innerHTML = words[index];
                                modal.style.display = "block";
                                $('.modal-content').css('display', 'none');
                            } else if(adventwindow <= day && isMosaik) {
                                $('.mosaik').css('display', 'block');                             
                                captionText.innerHTML = words[index];
                                modal.style.display = "block";
                                $('.modal-content').css('display', 'none');
                            }


                            if(adventwindow <= day) {
                                $(this).children(".door").toggleClass("open");
                                console.log("Ã¶ffnene");
                            


                        }

                        $(this).removeClass("jiggle");

                        // If 25th, can show the message
                        if(day >= 25 && adventwindow === 25) {
                            messageReveal();

                            // Animate scroll to message if not already done
                            if(!scrolled) {
                                $('html, body').animate({
                                    scrollTop: $("#message").offset().top
                                }, 2000);
                                scrolled = true;
                            }
                        }
                    });

                });

                // If beyond 24, show message
                if(day >= 24){
                    messageReveal();
                }

            }

        });
        

    </script>
</body>

</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naomies advent calendar</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>
    <!--
    <div id="overlay" onclick="off()">
        <img id="doorSuprise" src=""">
    </div>
    -->
    <h1>Naomies advent<br>calendar</h1>

    
    <button style="background-color: lightblue; width: 20%; position: relative; height: 10vh; margin-left: auto; margin-right: auto;" class="btn">Hier Klicken um alles zu √∂ffnen</button>

    <button style="background-color: lightblue; width: 20%; position: relative; height: 10vh; margin-left: auto; margin-right: auto;" class="btnLogIn">Login</button>


    <ul>

        
    <li><div class="door one">1</div></li>
    <li class="two"><div class="door">2</div></li>
    <li>
        <div class="door three">3</div>
    </li>

        


    <li class="img four"><div class="door">4</div></li>
    <li><div class="door five">5</div></li>


    <li class="img six"><div class="door">6</div></li>
    <li class="img seven"><div class="door 7">7</div></li>
    <li class="eight"><div class="door 8">8</div></li>
    <li class="img nine"><div class="door">9</div></li>
    <li class="img ten"><div class="door">10</div></li>
    <li><div class="door">11</div></li>

    <li class="btnLogIn twelve"><div class="door">12</div></li>

    <li><div class="door">13</div></li>
    <li class="fourteen"><div class="door 14">14</div></li>

    <li class="img fifeteen">
        <div class="door">15</div>
        <div style="font-size: 19.5px;" class="revealed">
            <a style="color: #F8B229;" target="_blank" href="https://www.jigsawplanet.com/?rc=play&pid=3dfe53a43657" title="TV-Abend">üß©</a>
        </div>
    </li>

    <li class="img sixteen"><div class="door">16</div></li>
    <li><div class="door">17</div></li>
    <li class="img eightteen"><div class="door">18</div></li>
    <li class="nineteen"><div class="door">19</div></li>
    <li class="video"><div class="door">20</div></li>
    <li><div class="door">21</div></li>
    <li><div class="door">22</div></li>
    <li><div class="door">23</div></li>
    <li class="img"><div class="door">24</div></li>
    </ul>


    <!-- The Modal -->
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <button class="downloadBtn">Download</button>
        <div id="caption"></div>
        <div style="left:0; width:50%; height:0; position:relative; padding-bottom:25%; margin:0 auto"><iframe src="https://www.tickcounter.com/widget/countdown/6223248" style="top:0; left:0; width:100%; height:100%; position:absolute; border:0; overflow:hidden" title="Til we see us again"></iframe></div>    </div>




    <script>





        $( document ).ready(function() {



            //√∂ffent alle t√ºrchen
            $( ".btn" ).click(function() {
                for(var i=0; i <= 24; i++) {
                    $(".door").addClass("open");
                }
                
                //("li").each($(this).children(".door").addClass("open"));  
            });

            /*
            $( ".btnLogIn" ).click(function() {
                var text;
                var password = prompt("password:");

                if (password == null || password == "") {
                    console.log('Input abgebrochen/leer');
                }
                else{
                    if(password == "sube"){
                        alert("Eingeloggt");

                    }
                    else{
                        alert("Login failed");
                        $(this).removeClass("open");
                        document.getElementById("myModal").style.display = "none";
                    }
                }
            });
            */

            $( ".downloadBtn" ).click(function() {

            });


            // Get the modal
            var modal = document.getElementById("myModal");

            // Get the image and insert it inside the modal - use its "alt" text as a caption

            var modalImg = document.getElementById("img01");
            var captionText = document.getElementById("caption");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks on <span> (x), close the modal
            span.onclick = function() { 
                modal.style.display = "none";
            }




            var words = [
                        "Einladung zum Pizza Essen üí∏üë®‚Äçüåæ -> üçï ", "Netflix Watchparty üçø", "German christmas cookies üç™", "üòÜ", "Supper date", 
                        "Happy Nikolaus Tag üéÖ", "Special Candle ;)", 
                        "üá©üá™/üá®üá¶", "Voucher: Sexy Pic üòâ", 
                        "To get ready for german christmas üé∂", "", "", 
                        "put together your own ice cream üç®", 
                        "Our places üåè‚ù§Ô∏è", "", "German Poutine üçü", 
                        "Pour ma belle blonde", 
                        "üíö", "Our Time", "Special dices ;)", 
                        "Falls die Fu√ücreme nicht genug w√§rmt ü§ó", "Heute gibts mal was f√ºr deine üëÑ", "Gutschein zum Pl√§tzle/Cookies backen üç™", "Frohe Weihnachten ‚ù§Ô∏è"
                        ];

                        
          

            var message = "";
            var date = new Date();
            var day = date.getDate();
            var month = date.getMonth() + 1;
            var scrolled = false;
            var timeDelay = 200;


            day = 24;

            if(month === 12) {
            // Loop through each calendar window
                $("li").each( function( index ) {
                    var adventwindow = index + 1;
                    var item = $(this);


                    // Open past windows
                    

                    // timeout offset for past window opening animation
                    timeDelay += 100;

                    // Add words so far to message variable
                    if( adventwindow <= day ) {

                        var word = words[index];

                        if(word == undefined || $(this).hasClass("img") || word == "") {
                            word = "";
                        } 
                        else {
                            $(this).append('<div class="revealed">' + word + '</div>');
                            message = message + " " + word;
                        }
                    }


                    // Add jiggle animation to current day window
                    if(adventwindow === day) {
                        $(this).addClass("current");
                        $(this).addClass("jiggle");
                    }




                    // On clicking a window, toggle it open/closed and
                    // handle other things such as removing jiggle and 25th
                    $(this).on("click", function() {

                        var isLoginBtn = $(this).hasClass("btnLogIn");
                        console.log(isLoginBtn);

                        
                        if ($(this).hasClass("img") && !$(this).children(".door").hasClass("open")) {

                                      
                            var bg = $(this).css('background-image');
                            
                            var cleanup = /\"|\'|\)/g;
                            bg = bg.split('/').pop().replace(cleanup, '');
                            bg = "img/" + bg;
                            
                            //console.log(bg);

                            captionText.innerHTML = words[index];
                            modalImg.src = bg;
                            modal.style.display = "block";

                            
                        } else if($(this).hasClass("video") && !$(this).children(".door").hasClass("open")) {
                            window.open("https://open.spotify.com/playlist/5SRTxUBKTTSXbGYQC5uqkd");
                        } else if(isLoginBtn) {

                            var text;
                            var password = prompt("password:");

                            if (password == null || password == "") {
                                console.log('Input abgebrochen/leer');
                            }
                            else{
                                if(password == "sube"){
                                    alert("Eingeloggt");

                                    var bg = $(this).css('background-image');
                                    var cleanup = /\"|\'|\)/g;
                                    bg = bg.split('/').pop().replace(cleanup, '');
                                    bg = "img/" + bg;
                                    
                                    console.log(bg);

                                    captionText.innerHTML = words[index];
                                    modalImg.src = bg;
                                    modal.style.display = "block";
                                }
                                else{
                                    alert("Login failed");
                                    $(this).removeClass("open");
                                    document.getElementById("myModal").style.display = "none";
                                }
                            }
                        }


                        if(adventwindow <= day && !isLoginBtn) {
                            $(this).children(".door").toggleClass("open");
                        


                    }

                    $(this).removeClass("jiggle");

                    // If 25th, can show the message
                    if(day >= 25 && adventwindow === 25) {
                        messageReveal();

                        // Animate scroll to message if not already done
                        if(!scrolled) {
                            $('html, body').animate({
                                scrollTop: $("#message").offset().top
                            }, 2000);
                            scrolled = true;
                        }
                    }
                });

            });

            // If beyond 24, show message
            if(day >= 24){
                messageReveal();
            }

            }

        });
        

    </script>
</body>

</html>
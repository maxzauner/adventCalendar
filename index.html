<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naomies advent calendar</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>
    <!--
    <div id="overlay" onclick="off()">
        <img id="doorSuprise" src=""">
    </div>
    -->
    <h1>Naomies advent<br>calendar</h1>

    <!--
    <button style="background-color: lightblue; width: 20%; position: relative; height: 10vh; margin-left: auto; margin-right: auto;" class="btn">Hier Klicken um alles zu √∂ffnen</button>
    <button style="background-color: lightblue; width: 20%; position: relative; height: 10vh; margin-left: auto; margin-right: auto;" class="btnLogIn">Login</button>

    -->


    <ul>

        
    <li class="img one"><div class="door">1</div></li>
    <li class="img two"><div class="door">2</div></li>
    <li class="img three"><div class="door">3</div></li>

        


    <li class="img four"><div class="door">4</div></li>
    <li class="five"><div class="door">5</div></li>


    <li class="img six"><div class="door">6</div></li>
    <li class="img seven"><div class="door 7">7</div></li>


    <li class="btnLogIn img eight" id="0"><div class="door 8">8</div></li>


    <li class="img nine"><div class="door">9</div></li>



    
    <li class="img ten"><div class="door">10</div> </li>
    <li class="img eleven"><div class="door">11</div></li>

    <li class="img twelve" id="0"><div class="door">12</div></li>

    <li class="btnLogIn img thirteen"><div class="door 13">13</div></li>
    <li class="img fourteen"><div class="door 14">14</div></li>

    <li class="img fifeteen">
        <div class="door">15</div>
    </li>

    <li class="sixteen"><div class="door">16</div></li>
    <li class="img seventeen"><div class="door">17</div></li>
    <li class="img eightteen"><div class="door">18</div></li>
    <li class="img nineteen"><div class="door">19</div></li>
    <li class="twenty"><div class="door">20</div></li>
    <li class="img twentyone"><div class="door">21</div></li>
    <li><div class="door">22</div></li>
    <li class="img twentythree"><div class="door">23</div></li>
    <li class="img"><div class="door">24</div></li>
    </ul>


    <button type="button" id="btnStyle">Choose Theme</button>
    <button type="button" id="showTheme">Show them</button>

    <!-- The Modal -->
    <div id="myModal" class="modalClass">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div class="mosaik">
            <br><iframe src="https://mosaically.com/embed/0ca94b63-a986-481a-85b5-c4f16582967a" scrolling="no" width="100%" height="700" frameBorder="0" allowfullscreen></iframe><!--REMOVING THE FOLLOWING CREDIT IS A VIOLATION OF YOUR TERMS OF USE--><br><small><a href="https://mosaically.com/maxza"></a> <a href="https://mosaically.com"></a></small>
        </div>
        <!--

        <div class="countdown" style="left:0; width:50%; height:30vh; position:relative; padding-bottom:30%; margin:0 auto"><iframe src="https://www.tickcounter.com/widget/countdown/6224367" style="top:0; left:0; width:100%; height:100%; position:absolute; border:0; overflow:hidden" title="d"></iframe></div>
               -->
        <div id="caption"></div>
    </div>

    
    <!-- The Style Chooser
    <div id="chooseTheme" class="modalClass">
        <span class="close">&times;</span>
        <div id="caption">Hallooo</div>
        <ul>
            <li id="cozyTheme">Cozy</li>
            <li id="winterTheme">Game Theme</li>
            <li id="sexyTheme">Sexy Theme</li>
            <li style="display: none;" id=""></li>
        </ul>
    </div>

 -->

    <script>

        $( document ).ready(function() {
            
            //√∂ffent alle t√ºrchen
            $( ".btn" ).click(function() {
                for(var i=0; i <= 24; i++) {
                    $(".door").addClass("open");
                }
                
                //("li").each($(this).children(".door").addClass("open"));  
            });


            // Get the modal
            var modal       = document.getElementById("myModal");

            // Get the image and insert it inside the modal - use its "alt" text as a caption
            var modalImg    = document.getElementById("img01");
            var captionText = document.getElementById("caption");

            // Get the <span> element that closes the modal
            var close        = document.getElementsByClassName("close")[0];

            // When the user clicks on <span> (x), close the modal
            close.onclick = function() { 
                modal.style.display = "none";
            }


            //===============================================================
            
            // First time open
            /*
            var chooseThemeWindow   = document.getElementById("chooseTheme");
            var btnChooseTheme      = document.getElementById("btnStyle");
            
            //Theme
            var btnThemeCozy   = document.getElementById("cozyTheme");
            var btnThemewinter = document.getElementById("winterTheme");
            var btnThemeSexy   = document.getElementById("sexyTheme");
            
            var btnShowStyle   = document.getElementById("showTheme");

            //Open window to choose style
            btnChooseTheme.onclick = function() {
                chooseThemeWindow.style.display = "block";
            }

            btnThemeCozy.onclick = function() {
                localStorage.setItem("calendarStyle", "cozy");
                chooseThemeWindow.style.display = "none";
            }

            btnThemewinter.onclick = function() {
                localStorage.setItem("calendarStyle", "winter");
                chooseThemeWindow.style.display = "none";
            }

            
            btnThemeSexy.onclick = function() {
                localStorage.setItem("calendarStyle", "sexy");
                chooseThemeWindow.style.display = "none";
            }

            
            //Show current style
            btnShowStyle.onclick = function() {
                var passwordString = $(this).attr('id');
                var paswordInt = parseInt(passwordString, 10);

                //alert(localStorage.getItem("calendarStyle"));
                alert(passwordString);
            }

            //Style Laden
            const style = localStorage.getItem("calendarStyle"); 
            if (style === "cozy") {
                //loadCozyStyle();
            } else if (style === "funny") {
                //loadFunnyStyle();
            }
            */

            //===============================================================

            var words = [
                        "Christmas market Voucher", "I love you because youre caring", "Naomies christmas adventure game", "I love you because youre cuddly", "big Candybox is waiting for you ;)", 
                        "Happy Nikolaus Tag üéÖ", "I love you because youre an animal lover", 
                        "The trail", "I love you because you love eating ;)", 
                        "Christmas Mojito", "Bath bomb", "I love you because youre canadian", 
                        "üì∑", "I love you because youre cute", "I love you because youre adventurous", "Guess game", 
                        "Fig jam", 
                        "I love you because youre a traveller", "I love you because you do things with me", "Little gadget for us ;)", 
                        "I love you because youre all in", "Gift for both of us ;)", "German cookies", "Frohe Weihnachten ‚ù§Ô∏è"
                        ];

                        
        
            var message = "";
            var date = new Date();
            var day = date.getDate();
            var month = date.getMonth() + 1;
            var scrolled = false;
            var timeDelay = 200;
            
            day = 24;




            if(month === 12) {
                // Loop through each calendar window
                    $("li").each( function( index ) {
                        var adventwindow = index + 1;
                        var item = $(this);

                        // Open past windows
                        if(adventwindow < day) {
                            var door = item.children(".door");
                            door.addClass("open");
                        }
                        

                        // timeout offset for past window opening animation
                        timeDelay += 100;

                        // Add words so far to message variable
                        if( adventwindow <= day ) {

                            var word = words[index];

                            if(word == undefined || $(this).hasClass("img") || word == "") {
                                word = "";
                            } 
                            else {
                                $(this).append('<div class="revealed">' + word + '</div>');
                                message = message + " " + word;
                            }
                        }


                        // Add jiggle animation to current day window
                        if(adventwindow === day) {
                            $(this).addClass("current");
                            $(this).addClass("jiggle");
                        }




                        // On clicking a window, toggle it open/closed and
                        // handle other things such as removing jiggle and 25th
                        $(this).on("click", function() {

                            var isLoginBtn = $(this).hasClass("btnLogIn");
                            var isDoorOne = $(this).hasClass("one");
                            var isMosaik = $(this).hasClass("mosaikDoor");

                            $('.modal-content').css('display', 'block');
                            $('.countdown').css('display', 'none');
                            $('.mosaik').css('display', 'none');
                            
                            if (adventwindow <= day && $(this).hasClass("img") && !$(this).children(".door").hasClass("open")) {

                                        
                                var bg = $(this).css('background-image');
                                
                                var cleanup = /\"|\'|\)/g;
                                bg = bg.split('/').pop().replace(cleanup, '');
                                bg = "img/" + bg;
                                
                                //console.log(bg);

                                captionText.innerHTML = words[index];
                                modalImg.src = bg;
                                modal.style.display = "block";

                                
                            } else if(isLoginBtn) {
                                var passwordString = $(this).attr('id');
                                var paswordInt = parseInt(passwordString, 10);
                                var passwords = [
                                    "test", "abc", "ddd", "b", "Supper"
                                    ];


                                var text;
                                var password = prompt("Solution of the last riddle?:");

                                if (password == null || password == "") {
                                    console.log('Input abgebrochen/leer');
                                }


                                else{
                                    //if(password == "sube"){
                                    if(password == passwords[paswordInt]){
                                    //testen
                                        alert("Approved");

                                        var bg = $(this).css('background-image');
                                        var cleanup = /\"|\'|\)/g;
                                        bg = bg.split('/').pop().replace(cleanup, '');
                                        bg = "img/" + bg;
                                        
                                        console.log(bg);

                                        captionText.innerHTML = words[index];
                                        modalImg.src = bg;
                                        modal.style.display = "block";
                                    }
                                    else{
                                        alert("Login failed");
                                        $(this).removeClass("open");
                                        document.getElementById("myModal").style.display = "none";
                                    }
                                }
                            } /*else if(isDoorOne) {
                                
                                $('.countdown').css('display', 'block');                             
                                captionText.innerHTML = words[index];
                                modal.style.display = "block";
                                $('.modal-content').css('display', 'none');
                                
                            } else if(adventwindow <= day && isMosaik) {
                                $('.mosaik').css('display', 'block');                             
                                captionText.innerHTML = words[index];
                                modal.style.display = "block";
                                $('.modal-content').css('display', 'none');
                            }*/


                            if(adventwindow <= day) {
                                $(this).children(".door").toggleClass("open");
                                console.log("√∂ffnene");
                            


                        }

                        $(this).removeClass("jiggle");

                        // If 25th, can show the message
                        if(day >= 25 && adventwindow === 25) {
                            //messageReveal();
                            // Animate scroll to message if not already done
                            if(!scrolled) {
                                $('html, body').animate({
                                    scrollTop: $("#message").offset().top
                                }, 2000);
                                scrolled = true;
                            }
                        }
                    });

                });

                // If beyond 24, show message
                if(day >= 24){
                    //messageReveal();
                    //alert("hi");
                }

            }

        });


        

    </script>
</body>

</html>